# Prior-Auth Fastlane MVP

> Autonomous agentic development framework for building a clinic-safe prior authorization workflow system

## 🎯 Project Overview

**Goal:** Ship a clinic-safe, No PHI Mode MVP that proves ROI on prior-auth operations without requiring EHR API approvals.

See [plan.md](../../plan.md) for complete product requirements.

## 🤖 Agentic Framework Structure

This project is built using the **7-Level Agentic Prompt Framework** to enable autonomous development through GitHub issues.

```
apps/prior-auth-fastlane/
├── .claude/
│   ├── commands/          # Level 2 Workflow Prompts
│   │   ├── feature.md     # Plan new features
│   │   ├── bug.md         # Fix bugs
│   │   ├── chore.md       # Maintenance tasks
│   │   ├── implement.md   # Build from plan (Level 5 Higher-order)
│   │   ├── test.md        # Test implementation
│   │   ├── review.md      # Code review
│   │   ├── document.md    # Generate docs
│   │   └── e2e/           # E2E test templates
│   └── agents/            # Specialized agents (future)
├── adws/                  # ADW orchestration scripts (Python)
│   ├── adw_plan_iso.py    # Phase 1: Planning
│   ├── adw_build_iso.py   # Phase 2: Implementation
│   ├── adw_test_iso.py    # Phase 3: Testing
│   ├── adw_review_iso.py  # Phase 4: Review
│   ├── adw_document_iso.py # Phase 5: Documentation
│   ├── adw_ship_iso.py    # Phase 6: Ship (merge)
│   ├── adw_sdlc_iso.py    # Complete SDLC chain
│   └── adw_modules/       # Shared Python modules
├── agents/                # ADW state files (adw_state.json)
├── specs/                 # Generated implementation plans
├── app_docs/              # Application documentation
└── ai_docs/               # AI/LLM documentation context

# App code will be generated by agents here:
# (Next.js app structure will be created by ADWs)
```

## 🚀 How Autonomous Development Works

### 1. Create GitHub Issue
```markdown
Title: Feature: Email Ingestion for Payer Communications
Body: Implement email ingestion system that receives payer emails...

/adw_sdlc_iso
```

### 2. Cron Agent Detects Issue
- GitHub Actions runs every 5 minutes
- Detects issues with `/adw_*` commands
- Extracts issue number, command, metadata

### 3. ADW Orchestrator Runs
```bash
# Automatically triggered by GitHub Actions
uv run adws/adw_sdlc_iso.py <issue-number>
```

### 4. Autonomous Execution
```
Plan → Build → Test → Review → Document → Ship
  ↓      ↓       ↓       ↓         ↓        ↓
specs/ → code → tests → PR    → docs   → merge
```

### 5. Zero Involvement
- All phases run autonomously in isolated git worktrees
- Progress posted to GitHub issue comments
- Auto-merges if all phases pass
- You only fix template issues, not code

## 📋 Agentic Prompt Structure

All prompts follow the **Input → Workflow → Output** framework:

### Level 2 Workflow Prompt Template
```markdown
# Title

## Metadata
description: "One-sentence description"

## Purpose
Direct statement to agent about what this prompt does.

## Variables
variable_name: $1
another_var: $2
static_var: "hardcoded value"

## Workflow
1. First step
   - Sub-task detail
   - Another sub-task
2. Second step
3. Third step

## Report
Return exclusively: <expected output format>
```

## 🧱 Core Principles

Following TAC-11 Agentic Prompt Engineering lesson:

1. **Consistency Over Complexity** - Same structure every prompt
2. **The Trifecta** - Write for you, your team, and your agents
3. **Workflow is King** - Step-by-step plays are the most valuable section
4. **Composable Sections** - Mix and match only what you need
5. **Static vs Dynamic Variables** - Clear separation
6. **Input → Workflow → Output** - Always think in this pattern

## 🎬 Quick Start (Manual Testing)

```bash
# 1. Set up environment
cd apps/prior-auth-fastlane
cp ../../.env.sample .env
# Edit .env with your API keys

# 2. Create a test GitHub issue
gh issue create --title "Feature: Test Feature" --body "Test description

/adw_plan_iso"

# 3. Run planning phase manually
uv run adws/adw_plan_iso.py <issue-number>

# 4. Check output
ls specs/  # See generated plan
cat agents/<adw-id>/adw_state.json  # See state
```

## 📚 Tech Stack

**Determined by plan.md:**
- **Frontend:** Next.js 15 + TypeScript + Tailwind CSS 4.0
- **Auth:** Neon Auth
- **Database:** Neon Serverless Postgres
- **Storage:** Cloudflare R2
- **Email:** Mailgun
- **Queues:** Vercel Queues
- **Deployment:** Vercel
- **LLM:** OpenAI + Claude APIs

## 🔧 Development Workflow

### For Humans (You)
1. Create GitHub issues with feature descriptions
2. Add `/adw_sdlc_iso` command
3. Monitor progress in issue comments
4. Fix template issues if agents get stuck
5. Review and approve final PRs (optional with ZTE)

### For Agents (Autonomous)
1. Receive issue via ADW orchestrator
2. Classify issue type (feature/bug/chore)
3. Generate implementation plan in isolated worktree
4. Implement code following plan
5. Run tests and validate
6. Self-review code quality
7. Generate documentation
8. Auto-merge if all checks pass

## 📖 Next Steps

1. ✅ Project structure created
2. 🔄 Build Level 2 Workflow prompts
3. ⏳ Copy & adapt ADW orchestration scripts
4. ⏳ Test manual execution
5. ⏳ Set up GitHub Actions
6. ⏳ Enable autonomous mode
7. ⏳ Build entire app via GitHub issues

---

**Built with the 7-Level Agentic Prompt Framework**
Learn more: See `../../tac-11agentic-prompt.txt`
